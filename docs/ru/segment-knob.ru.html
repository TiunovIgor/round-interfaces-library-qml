<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>segment-knob.ru</title>
<style type="text/css">/*...*/</style>
</head>
<body>
<p><a href="../../readme.ru.html">Главная</a> → Ручка-регулятор </p>
<hr/><h1>SegmentKnob</h1><h2>Содержание</h2>
<ol>
  <li><a href="#description">Описание объекта</a></li>
  <li><a href="#dependencies">Зависимости объекта</a></li>
  <li><a href="#constructor">Создание объекта</a></li>
  <li><a href="#examples">Примеры</a></li>
  <li><a href="#properties">Свойства</a></li>
  <li><a href="#methods">Методы</a></li>
  <li><a href="#events">События</a></li>
</ol><h2><a id="description"></a>Описание объекта</h2><p>Ручка-регулятор – вращающийся элемент управления для изменения какой-либо величины (рис. 1). </p><p><img src="../../docs/images/segment_knob.png" alt="SegmentKnob" /><br/>Рис. 1 - Ручка-регулятор</p><h2><a id="dependencies"></a>Зависимости объекта</h2><p>Для создания объекта типа SegmentKnob необходимо подключить следующие скрипты: </p>
<ul>
  <li>segment.js</li>
  <li>segment-dot.js</li>
  <li>segment-scale-mark.js</li>
  <li>segment-gradient.js</li>
  <li>utilities.js</li>
</ul><h2><a id="constructor"></a>Создание объекта</h2><p>Для создания объекта в функцию-конструктор передаются основные параметры: </p>
<blockquote><p><em>id</em> - идентификатор ручки в виде текстовой строки.<br/><em>context</em> - контекст типа CanvasRenderingContext2D для отрисовки ручки.<br/><em>cx</em> - координата X центра базового сегмента.<br/><em>cy</em> - координата Y центра базового сегмента.<br/><em>r_in</em> - внутренний радиус базового сегмента.<br/><em>thickness</em> - толщина базового сегмента.<br/><em>init_angle</em> - начальный угол базового сегмента в градусах. Может принимать отрицательные значения. <em>angle</em> - угол базового сегмента в градусах.</p>
</blockquote><p>Внешний радиус базового сегмента <em>r_out</em> будет рассчитан автоматически в процессе создания объекта.</p><p>Объект примет форму кольца, если угол сегмента <em>angle</em> задать кратным 360 градусам.<br/>Объект примет форму сегмента круга, если внутренний радиус <em>r_in</em> задать равным 0.<br/>Объект примет форму круга, если выполнить оба этих условия.</p><h2><a id="examples"></a>Примеры</h2><p><a href="../../examples/round-volume-control-examples.html" target="_blank">Примеры</a> использования различных свойств и методов объекта. </p><h2><a id="properties"></a>Свойства</h2><p>Ручка-регулятор - это составной объект. В его состав входят: </p>
<blockquote><p><em>base_segment</em> - базовый сегмент, определяющий основу ручки.<br/>Также ручка имеет метку, которая указывает на текущее значение изменяемой величины.<br/>Тип метки определяется параметром <em>notch_type</em>, который может принимать следующие значения: </p>
  <blockquote><p><em>dot</em> - метка представлена объектом типа <em>SegmentDot</em>.<br/><em>mark</em> - метка представлена объектом типа <em>SegmentScaleMark</em>. </p>
  </blockquote>
</blockquote><p>Метка имеет следующие общие параметры:</p>
<blockquote><p><em>notch_type</em> - тип метки.<br/><em>notch_init_angle</em> - начальный угол метки отностительно базового сегмента. По умолчанию принимается равным половине угла базового сегмента.<br/><em>notch_min_angle</em> - минимальный угол метки.<br/><em>notch_max_angle</em> - максимальный угол метки.<br/><em>notch_angle</em> - текущий угол метки.<br/><em>notch_width</em> - толщина границ метки типа <em>dot</em>, либо толщина метки типа <em>mark</em>.<br/><em>notch_color</em> - цвет границ метки типа <em>dot</em>, либо цвет метки типа <em>mark</em>. </p>
</blockquote><p>Для метки типа <em>dot</em> могут быть заданы следующие параметры: </p>
<blockquote><p><em>dot_radius</em> - радиус точки.<br/><em>dot_base_radius</em> - базовый радиус точки.<br/><em>dot_gradient</em> - градиент заливки точки.<br/><em>dot_background</em> - цвет заливки точки. </p>
</blockquote><p>Для метки типа <em>mark</em> могут быть заданы следующие параметры: </p>
<blockquote><p><em>mark_r_in</em> - внутренний радиус метки.<br/><em>mark_length</em> - длина метки. </p>
</blockquote><h3>Стиль оформления базового сегмента</h3>
<blockquote><p><em>gradient</em> - градиент заливки базового сегмента типа <a href="segment-gradient.ru.html">SegmentGradient</a>.<br/><em>background</em> - цвет заливки базового сегмента (применяется, если не задан градиент заливки).<br/><em>border_width</em> - толщина границ базового сегмента.<br/><em>border_color</em> - цвет границ базового сегмента.</p>
</blockquote><h3>Флаги объекта</h3>
<blockquote><p><em>visible</em> - видимость. Значение <em>true</em> обеспечивает видимость объекта.<br/><em>notch_visible</em> - видимость метки. Значение <em>true</em> обеспечивает видимость объекта.<br/><em>in_progress</em> - в процессе. Флаг принимает значение <em>true</em> в процессе анимации.<br/><em>is_active</em> - активность метки. Флаг принимает значение <em>true</em> при захвате и вращении ручки. </p>
</blockquote><h2><a id="methods"></a>Методы</h2>
<blockquote><p><em>build()</em> - выполняет основные вычисления формы и внешнего вида сегмента при его создании, изменении параметров и в процессе анимации.<br/>Этот метод необходимо вызывать после изменения свойств объекта, чтобы они вступили в силу. </p><p><em>calcBorder()</em> - определяет стили границ сегмента. Вызывается автоматически из метода <em>calc()</em>. </p><p><em>draw()</em> - функция отрисовки сегмента. </p><p><em>instanceCopy()</em> - создание независимой копии объекта. </p><p><em>isPointInside(x, y)</em> - функция проверки принадлежности фигуре точки с координатами (x,y). </p><p><em>setNotchAngle(angle)</em> - изменение положения ручки для приведения отметки к углу <em>angle</em>. </p><p><em>catchKnob(e)</em> - захват ручки с помощью щелчка левой кнопки мыши на ней. </p>
  <blockquote><p>Метод установлен в качестве обработчика события <em>mousedown</em> на холсте.<br/>Обработчик доступен через параметр <em>mousedown</em> для обеспечения возможности его удаления.<br/>Удаление и переопределение обработчика необходимо в составных объектах (например, регуляторе уровня громкости). </p>
  </blockquote><p><em>rotateKnobByMouseMovement(e)</em> - вращение захваченной ручки перемещением курсора мыши. </p>
  <blockquote><p>Метод установлен в качестве обработчика события <em>mousemove</em> на холсте.<br/>Обработчик доступен через параметр <em>mousemove</em> для обеспечения возможности его удаления.<br/>Удаление и переопределение обработчика необходимо в составных объектах. </p>
  </blockquote><p><em>rotateKnobByMouseWheel(e)</em> - вращение захваченной ручки вращением колеса мыши. </p>
  <blockquote><p>Метод установлен в качестве обработчика события <em>wheel</em> на холсте.<br/>Обработчик доступен через параметр <em>wheel</em> для обеспечения возможности его удаления.<br/>Удаление и переопределение обработчика необходимо в составных объектах. </p>
  </blockquote><p><em>releaseKnob()</em> - освобождение захваченной ручки осуществляется отпусканием левой кнопки мыши. </p>
  <blockquote><p>Метод установлен в качестве обработчика событий <em>mouseup</em> и <em>mouseout</em> на холсте.<br/>Обработчики доступны через параметры <em>mouseup</em> и <em>mouseout</em> сооответственно для обеспечения возможности их удаления.<br/>Удаление и переопределение обработчиков необходимо в составных объектах. </p>
  </blockquote>
</blockquote><h2><a id="events"></a> События</h2><p>События, запускаемые объектом SegmentKnob, реализованы с помощью CustomEvent.<br/>В поле <em>detail.knob</em> передается ссылка на сам объект. </p>
<blockquote><p><em>segment-knob-changed</em> - ручка изменена. </p>
</blockquote>
<hr/><p><a href="../../readme.ru.html">Главная</a> → Ручка-регулятор </p>
</body>
</html>