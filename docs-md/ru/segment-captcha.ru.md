<a href="../../readme.ru.html">Главная</a> → Круговой тест CAPTCHA

***

# SegmentCaptcha

## Содержание
1. [Описание объекта](#description)  
2. [Зависимости объекта](#dependencies)  
3. [Создание объекта](#constructor)  
4. [Примеры] (#examples)  
5. [Свойства](#properties)  
6. [Методы](#methods)  
7. [События](#events)  

##<a id="description"></a>Описание объекта

Круговой тест CAPTCHA – компьютерный тест, в котором пользователь должен совместить места разрывов концетрических колец.  
Так как данная задача является нетривиальной для компьютера, решив ее пользователь доказывает, что является человеком, а не компьютером (рис. 1).  

![SegmentCaptchaGeometry](../../docs/images/segment_captcha_geometry.png)  
рис. 1 - Вид кругового теста CAPTCHA.  

Одно из колец, базовое, является статическим и не может быть повернуто с помощью мыши. Для этого кольца следует задать стиль, отличный от других колец.  
Для решения задачи пользователь должен совместить разрывы остальных колец с разрывом базового кольца.  
Захват кольца осуществляется щелчком и удержанием левой кнопки мыши.  
Вращение кольца осуществляется перемещением курсора мыши.  

##<a id="dependencies"></a>Зависимости объекта  
Для создания объекта типа SegmentCaptcha необходимо подключить следующие скрипты:  

* segment.js  
* segment-gradient.js  
* utilities.js  

##<a id="constructor"></a>Создание объекта  
Для создания объекта в функцию-конструктор передаются основные параметы:
>
*id* - идентификатор объекта в виде текстовой строки.  
*context* - контекст типа CanvasRenderingContext2D для отрисовки сегментов.  
*cx* - координата X центра базового сегмента.  
*cy* - координата Y центра базового сегмента.  
*r_in* - внутренний радиус объекта.  
*thickness* - толщина объекта.  

##<a id="examples"></a>Примеры  
<a href="../../examples/round-captcha-examples.html" target="_blank">Примеры</a> использования различных свойств и методов объекта.  

##<a id="properties"></a>Свойства
>
*space_thickness* - толщина промежутков между кольцами.  
*precision* - точность совмещения колец в градусах.  

### Стиль оформления базового кольца  
>
*base_segment_gradient* - градиент заливки типа <a href="segment-gradient.ru.html">SegmentGradient</a>.   
*base_segment_background* - цвет заливки базового сегмента (применяется, если не задан градиент заливки).  
*base_segment_border_width* - толщина границ базового сегмента.  
*base_segment_border_color* - цвет границ базового сегмента.  
*base_segment_position* - позиция базового сегмента.  

>>Допустимые значения дла параметра "base_segment_position":  
>> _"inner"_ - базовым является внутреннее кольцо.  
>> _"outer"_ - базовым является внешнее кольцо.  

Границы базового сегмента могут быть заданы отдельно при прямом доступе к нему через свойство *base_segment*.  

### Параметры свободных колец  
>
*segments_count* - общее количество колец.  
*segment_break* - разрыв кольца в градусах.  

### Стиль оформления свободных колец  
> *segment_gradient* - градиент заливки колец. Значение типа <a href="segment-gradient.ru.html">SegmentGradient</a>.  
> *segment_background* - цвет заливки колец (применяется, если не задан градиент заливки).  
> *segment_border_width* - толщина границ колец.  
> *segment_border_color* - цвет границ колец.  

### Флаги массива
>
*proportional* - пропорциональность. Значение *true* обеспечивает одинаковые углы для элементов массива и расстояний между ними.  
*visible* - видимость. Значение *true* обеспечивает видимость объекта.  
*segments_visible* - видимость колец. Значение *true* обеспечивает видимость элементов.  
*in_progress* - в процессе. Флаг принимает значение *true* в процессе анимации.  

##<a id="methods"></a>Методы

> *build()* - выполняет основные вычисления формы и внешнего вида базового и свободных колец с учетом заданных свойств и флагов.

> *draw()* - функция отрисовки объекта.  

> *instanceCopy()* - создание независимой копии объекта.  

> *catchSegment(e)* - захват кольца с помощью щелчка левой кнопкой мыши на нем.  

> *rotateSegmentByMouseMovement(e)* - вращение захваченнного кольца перемещением курсора мыши.  

> *rotateSegmentByMouseWheel(e)* - вращение захваченного кольца с помощью вращения колеса мыши.  

> *releaseSegment()* - освобождение захваченного кольца осуществляется отпусканием левой кнопки мыши.  

> *checkCaptcha()* - проверка положения всех колец.  
Если разрывы всех колец совмещены с достаточной точность "precision", то запускается событие "segment-captcha-unlocked".  

##<a id="events"></a> События

События, запускаемые объектом SegmentCaptcha, реализованы с помощью CustomEvent.  
В параметре *detail.captcha* передается ссылка на сам объект.

> *segment-captcha-changed* - объект изменен. Событие запускается, если изменено одно из колец.  

> *segment-captcha-unlocked* - captcha разблокирована. Событие запускается, если разрывы всех колец совмещены с точность "precision".  

***

<a href="../../readme.ru.html">Главная</a> → Круговой тест CAPTCHA  
