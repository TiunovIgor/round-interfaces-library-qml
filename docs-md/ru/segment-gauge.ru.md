<a href="../../readme.ru.html">Главная</a> → Измерительный прибор

***

# SegmentGauge

## Содержание
1. [Описание объекта](#description)  
2. [Зависимости объекта](#dependencies)  
3. [Создание объекта](#constructor)  
4. [Примеры] (#examples)  
5. [Свойства](#properties)  
6. [Методы](#methods)  
7. [События](#events)  

##<a id="description"></a>Описание объекта

Измерительный прибор – составной графический объект, предназначенный для визуализации значений измеряемой физической величины (рис. 1).

![SegmentGaugeExample](../../docs/images/segment_gauge_example.png)  
рис. 1 - Пример измерительного прибора.

##<a id="dependencies"></a>Зависимости объекта  
Для создания объекта типа SegmentGauge необходимо подключить следующие скрипты:  

* segment.js  
* segment-arrow.js  
* segment-scale-mark.js  
* segment-scale-sign.js  
* segment-scale.js  
* segment-gradient.js  
* utilities.js  

##<a id="constructor"></a>Создание объекта  
Для создания массива сегментов в функцию-конструктор передаются основные параметры, которые используются для создания базового, или опорного, сегмента:
>
*id* - идентификатор массива сегментов в виде текстовой строки.  
*context* - контекст типа CanvasRenderingContext2D для отрисовки сегмента.  
*cx* - координата X центра базового сегмента.  
*cy* - координата Y центра базового сегмента.  
*r_in* - внутренний радиус базового сегмента.  
*thickness* - толщина базового сегмента.  
*init_angle* - начальный угол базового сегмента в градусах. Может принимать отрицательные значения. 
*angle* - угол базового сегмента в градусах.

##<a id="examples"></a>Примеры  
<a href="../../examples/round-gauge-examples.html" target="_blank">Примеры</a> использования различных свойств и методов объекта.  

##<a id="properties"></a>Свойства
>
*min_value* - минимальное значение шкалы прибора.  
*max_value* - максимальное значение шкалы прибора.  
*value* - текущее значение измеряемой величины.  
*speed* - скорость изменения показаний прибора. Применяется при анимации стрелки.  

Измерительный прибор - это составной объект. В его состав входят:  
>
*base_segment* - базовый сегмент, определяющий фон измерительного прибора.  
*frame* - рамка, представленная объектом типа сегмент <a href="segment.ru.html">Segment</a>.  
*scale* - круговая шкала, представленная объектом типа <a href="segment-scale.ru.html">SegmentScale</a>.  
*arrow* - стрелка, представленная объектом типа <a href="segment-arrow.ru.html">SegmentArrow</a>.  

### Стиль оформления измерительного прибора 
>
*base_segment_gradient* - градиент заливки типа <a href="segment-gradient.ru.html">SegmentGradient</a>.   
*base_segment_background* - цвет заливки базового сегмента (применяется, если не задан градиент заливки).  
*base_segment_border_width* - толщина границ базового сегмента.  
*base_segment_border_color* - цвет границ базового сегмента.  

>
Границы базового сегмента могут быть заданы отдельно при прямом доступе к нему через свойство *base_segment*.

>
*frame_gradient* - градиент заливки рамки.  
*frame_background* - цвет заливки рамки.  
*frame_border_width* - толщина границ рамки.  
*frame_border_color* - цвет границ рамки.  

>
*text* - надпись на приборе, сообщающая, например, единицы измерения.  
*text_offset_x* - смещение надписи по оси X относительно центра прибора.  
*text_offset_y* - смещение надписи по оси Y относительно центра прибора.  
>
*font* - шрифт надписи.  
*text_color* - цвет надписи.  
*text_border_width* - толщина границ текста надписи.  
*text_border_color* - цвет границ текста надписи.  

### Флаги массива
>
*visible* - видимость. Значение *true* обеспечивает видимость объекта.  
*in_progress* - в процессе. Флаг принимает значение *true* в процессе анимации.

##<a id="methods"></a>Методы

> *build()* - выполняет основные вычисления формы и внешнего вида измерительного прибора с учетом заданных свойств и флагов.

> *draw()* - функция отрисовки объекта.  

> *instanceCopy()* - создание независимой копии объекта.  

> *valueToAngle(value)* - функция расчета угла наклона стрелка в зависимости от значения измеряемой величины.  

> *setValue(value)* - функция установки текущего значения измеряемой величины.  

> *changeValue(value, speed, delay)* - анимация изменения текущего значения измеряемой величины на *value* со скоростью *speed* и задержкой *delay*.  

##<a id="events"></a> События

События, запускаемые объектом SegmentGauge, реализованы с помощью CustomEvent.  
В параметре *detail.gauge* передается ссылка на сам объект.

> *segment-gauge-changed* - объект изменен.  

***

<a href="../../readme.ru.html">Главная</a> → Измерительный прибор  