<a href="../../readme.ru.html">Главная</a> → Уровень сегментов

***

# SegmentLevel

## Содержание
1. [Описание объекта](#description)  
2. [Зависимости объекта](#dependencies)  
3. [Создание объекта](#constructor)  
4. [Примеры] (#examples)  
5. [Свойства](#properties)  
6. [Методы](#methods)  
7. [События](#events)  

##<a id="description"></a>Описание объекта

Сегментный уровень – совокупность сегментов, объединенных для совместного управления и анимации. (рис. 1).

![SegmentLevel](../../docs/images/segment_level.png)  
Рис. 1 - Уровень сегментов

##<a id="dependencies"></a>Зависимости объекта  
Для создания объекта типа SegmentLevel необходимо подключить следующие скрипты:  

* segment.js  
* segment-gradient.js  
* utilities.js  

##<a id="constructor"></a>Создание объекта 
Для создания объекта в функцию-конструктор передаются основные параметры:   
>
*id* - идентификатор сегмента в виде текстовой строки.  
*context* - контекст типа CanvasRenderingContext2D для отрисовки сегмента.  
*cx* - координата X центра сегментного уровня.  
*cy* - координата Y центра сегментного уровня.  
*r_in* - условный внутренний радиус. Радиусы сегментов одного уровня могут быть разными.

##<a id="examples"></a>Примеры  
<a href="../../examples/segment-level-examples.html" target="_blank">Примеры</a> использования различных свойств и методов объекта.  

##<a id="properties"></a>Свойства

### Флаги уровня сегментов
>
*visible* - видимость. Значение *true* обеспечивает видимость объекта.  
*segments_visible* - видимость сегментов.  
*in_progress* - в процессе. Флаг принимает значение *true* в процессе анимации уровня сегментов.  

##<a id="methods"></a>Методы

> *addSegment(segment)* - добавляет *segment* в список сегментов уровня.  

> *removeSegment(segment)* - удаляет *segment* из списка сегментов уровня.

> *build* - используется, когда нужно запустить событие *segment-level-changed* для отрисовки сегментов уровня.  

> *draw()* - функция отрисовки уровня. Вызывает метод .draw() для каждого объекта из списка сегментов уровня.

> *instanceCopy()* - создание независимой копии объекта.

### Анимация уровня сегментов

Анимация уровня - это различные изменения формы, положения или стиля оформления сегментов уровня со временем.

Основные параметры анимации:
> *duration* - длительность анимации. Задается в секундах.  
> *delay* - задержка перед началом анимации. Задается в секундах.   
> *direction* - направление анимации. Набор допустимых значений зависит от вида анимации.  
> *order* - порядок анимации. Допустимые значения:  
>> _"together"_ - вместе.
>> _"one-by-one-clockwise"_ - один за другим по часовой стрелке.  
>> _"one-by-one-anticlockwise"_ - один за другим против часовой стрелки.  
>> Для поочередной анимации длительность *duration* будет разделена равномерно между сегментами уровня с учетом задержки между анимацией сегментов.  

> *lag* - задержка между анимацией сегментов уровня. Задается в секундах.  

#### Методы анимации

> *appear(direction, duration, delay)* - появление сегментов уровня за счет постепенного изменения их формы.  
>> Допустимые значения параметра *direction* для метода анимации появления:  
>> _"from-center"_ - от центра сегмента.  
>> _"to-center"_ - к центру сегмента.  
>> _"from-axis"_ - от оси сегмента.  
>> _"clockwise"_ - по часовой стрелке.  
>> _"anticlockwise"_ - против часовой стрелки.  
Если все сегменты уровня появились, то запускается событие *segment-level-appeared*.

> *disappear(direction, duration, delay)* - исчезание сегментов уровня за счет постепенного изменения их формы.  
>> Допустимые значения параметра *direction* для метода анимации исчезания:  
>> _"from-center"_ - от центра сегмента.  
>> _"to-center"_ - к центру сегмента.  
>> _"to-axis"_ - к оси сегмента.  
>> _"clockwise"_ - по часовой стрелке.  
>> _"anticlockwise"_ - против часовой стрелки.  
Если все сегменты уровня исчезли, то запускается событие *segment-level-disappeared*.

> *rotate(order, lag, direction, angle, duration, delay)* - вращение сегментов уровня.
>> Угол поворота *angle* задается в градусах.  

>> Допустимые значения параметра *direction* для метода анимации вращения:  
>> _"clockwise"_ - по часовой стрелке.  
>> _"anticlockwise"_ - против часовой стрелки.  
Если все сегменты уровня повернуты, то запускается событие *segment-level-rotated*.

> *fadeIn(order, lag, duration, delay)* - появление сегментов уровня за счет постепенного изменения их прозрачности.  
>> Если все сегменты уровня выцвели, то запускается событие *segment-level-faded-in*.  

> *fadeOut(order, lag, duration, delay)* - исчезание сегментов уровня за счет постепенного изменения их прозрачности.
>> Если все сегменты уровня выцвели, то запускается событие *segment-level-faded-out*.  

##<a id="events"></a> События

События, запускаемые объектом SegmentLevel, реализованы с помощью CustomEvent.  
В параметре *detail.level* передается ссылка на сам объект.

> *segment-level-appeared* - все сегменты уровня появились.  
> *segment-level-disappeared* - все сегменты уровня исчезли.  
> *segment-level-rotated* - все сегменты уровня повернуты.  
> *segment-level-faded-in* - все сегменты уровня появились выцветанием.  
> *segment-level-faded-out* - все сегменты уровня исчезли выцветанием.  

***

<a href="../../readme.ru.html">Главная</a> → Уровень сегментов  